"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{1737:(e,t,r)=>{r.d(t,{W:()=>o});let a="http://localhost:4008/api",o={async getFeaturedProducts(){try{let e=await fetch(`${a}/products/featured`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw e}},async getProducts(){try{let e=await fetch(`${a}/products`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw e}},async getProductById(e){try{let t=await fetch(`${a}/products/${e}`);if(!t.ok){if(404===t.status)return null;throw Error(`HTTP error! status: ${t.status}`)}return await t.json()}catch(e){throw e}}}},4131:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(5155),o=r(5830),i=r(7652);function s(e){let{productId:t,variantId:r,quantity:s=1,disabled:l=!1,className:c="",children:n}=e,A=(0,i.c3)(),{addToCart:d,isLoading:u}=(0,o.x3)(),g=async e=>{if(e.preventDefault(),e.stopPropagation(),!l&&!u)try{await d({productId:t,variantId:r,quantity:s})}catch(e){}};return(0,a.jsx)("button",{onClick:g,disabled:l||u,className:`
        w-full px-3 py-2 text-sm font-medium rounded-lg 
        transition-all duration-200 transform active:scale-95
        focus:outline-none focus:ring-2 focus:ring-offset-2
        ${l||u?"bg-gray-300 text-gray-500 cursor-not-allowed focus:ring-gray-300":"bg-black text-white hover:bg-gray-800 focus:ring-gray-900"}
        ${c}
      `,type:"button",children:u?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A("products.adding")]}):n||A("products.addToCart")})}},4295:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(5155),o=r(7652),i=r(2550),s=r(6766),l=r(5695),c=r(2115),n=r(4131);let A=(0,c.memo)(e=>{var t,r,A,d;let{product:u}=e,g=(0,o.c3)(),p=(0,i.Ym)(),m=(0,l.useRouter)(),[h,w]=(0,c.useState)(!1),[x,C]=(0,c.useState)(!1),[y,v]=(0,c.useState)(!1),f="ar"===p,b=f?u.titleAr:u.title,I=(null==(t=u.images.find(e=>e.isMain))?void 0:t.url)||"/product-holder.webp",j=(null==(r=u.images.find(e=>e.isHover))?void 0:r.url)||I,K=(null==(A=u.reviewStats)?void 0:A.averageRating)||0,k=(null==(d=u.reviewStats)?void 0:d.totalReviews)||0,D=!!u.compareAtPrice,E=(0,c.useCallback)(()=>{m.push(`/${p}/products/${u.id}`)},[m,p,u.id]);(0,c.useCallback)(()=>{},[u.title]),(0,c.useCallback)(e=>{},[]);let B=(0,c.useCallback)(e=>{e.stopPropagation(),w(!h)},[h]),R=(0,c.useCallback)(e=>f?`${e.toFixed(2)} د.أ`:`JOD ${e.toFixed(2)}`,[f]),N=(0,c.useCallback)(()=>u.compareAtPrice&&u.compareAtPrice>u.price?Math.round((u.compareAtPrice-u.price)/u.compareAtPrice*100):0,[u.compareAtPrice,u.price]);return(0,a.jsxs)("div",{className:`group relative bg-white/70 backdrop-blur-2xl border border-white/20 rounded-2xl overflow-hidden transition-all duration-700 ease-out hover:bg-white hover:shadow-xl hover:shadow-black/5 hover:-translate-y-2 hover:scale-[1.02] cursor-pointer ${f?"rtl":"ltr"}`,onClick:E,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),E())},"aria-label":`${g("products.productDetails")} ${b}`,children:[(0,a.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,a.jsx)(s.default,{src:y&&j?j:I,alt:b,fill:!0,className:`object-cover transition-all duration-700 ease-out group-hover:scale-105 ${x?"opacity-100":"opacity-0"} ${j&&y?"opacity-0":"opacity-100"}`,sizes:"(max-width: 640px) 50vw, (max-width: 768px) 33vw, (max-width: 1024px) 25vw, 20vw",quality:85,priority:!1,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyOpCsIoqKKKkKggUVoooOOhRRQII//2Q==",onLoad:()=>C(!0)}),j&&(0,a.jsx)(s.default,{src:j,alt:`${b} hover`,fill:!0,className:`object-cover transition-all duration-700 ease-out group-hover:scale-105 ${y?"opacity-100":"opacity-0"}`,sizes:"(max-width: 640px) 50vw, (max-width: 768px) 33vw, (max-width: 1024px) 25vw, 20vw",quality:85,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyOpCsIoqKKKkKggUVoooOOhRRQII//2Q=="}),!x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 animate-pulse"}),(u.isNew||D||N()>0)&&(0,a.jsxs)("div",{className:`absolute top-2 ${f?"right-2":"left-2"}`,children:[u.isNew&&(0,a.jsx)("div",{className:"px-1.5 py-0.5 bg-black/90 backdrop-blur-xl text-white text-xs font-medium rounded-md",children:g("products.new")}),D&&!u.isNew&&(0,a.jsx)("div",{className:"px-1.5 py-0.5 bg-red-600/90 backdrop-blur-xl text-white text-xs font-medium rounded-md",children:N()>0?`${N()}%`:g("products.sale")})]}),!u.isInStock&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsx)("div",{className:"px-3 py-1 bg-gray-900/90 backdrop-blur-xl text-white text-xs font-medium rounded-md",children:g("products.outOfStock")})}),(0,a.jsx)("div",{className:`absolute top-2 ${f?"left-2":"right-2"} opacity-0 group-hover:opacity-100 transition-all duration-300`,children:(0,a.jsx)("button",{className:`w-7 h-7 bg-white/90 backdrop-blur-xl hover:bg-white rounded-full shadow-md transition-all duration-300 flex items-center justify-center ${h?"text-red-500":"text-gray-400 hover:text-red-500"}`,onClick:B,title:g(h?"products.removeFromWishlist":"products.addToWishlist"),"aria-label":g(h?"products.removeFromWishlist":"products.addToWishlist"),children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:h?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})})]}),(0,a.jsxs)("div",{className:"p-3 space-y-2",children:[(0,a.jsx)("h3",{className:`text-sm font-medium text-gray-900 line-clamp-2 leading-tight group-hover:text-gray-700 transition-colors ${f?"text-right":"text-left"}`,children:b}),(0,a.jsxs)("div",{className:`flex items-center gap-1 ${f?"flex-row-reverse":""}`,children:[(0,a.jsx)("div",{className:`flex items-center gap-0.5 ${f?"flex-row-reverse":""}`,children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:`w-1 h-1 rounded-full ${t<Math.floor(K)?"bg-yellow-400":"bg-gray-200"}`},t))}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",k,")"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:`flex items-baseline gap-2 ${f?"flex-row-reverse justify-start":"justify-start"}`,children:[(0,a.jsx)("span",{className:`text-base font-semibold text-gray-900 price ${f?"font-cairo":""}`,children:R(u.price)}),u.compareAtPrice&&(0,a.jsx)("span",{className:`text-xs text-gray-600 line-through price ${f?"font-cairo":""}`,children:R(u.compareAtPrice)})]}),(0,a.jsx)(n.A,{productId:u.id,disabled:!u.isInStock,className:"w-full"})]})]})]})});A.displayName="ProductCard";let d=A},5830:(e,t,r)=>{r.d(t,{_$:()=>d,$9:()=>u,x2:()=>p,Z$:()=>g,Lq:()=>m,x3:()=>A});var a=r(5453),o=r(6786);let i={id:"cart-1",items:[],itemCount:0,subtotal:0,tax:0,shipping:0,total:0,currency:"JOD",updatedAt:new Date().toISOString()},s=e=>{let t=e.reduce((e,t)=>e+t.quantity,0),r=e.reduce((e,t)=>e+t.price*t.quantity,0),a=.16*r,o=r>50?0:5,i=r+a+o;return{itemCount:t,subtotal:Number(r.toFixed(2)),tax:Number(a.toFixed(2)),shipping:Number(o.toFixed(2)),total:Number(i.toFixed(2))}},l=async e=>({title:`Product ${e}`,titleAr:`منتج ${e}`,price:25.99,imageUrl:"/product-holder.webp"});class c{async getCart(){return await new Promise(e=>setTimeout(e,100)),{...i}}async addToCart(e){await new Promise(e=>setTimeout(e,200));let t=await l(e.productId),r=i.items.findIndex(t=>t.productId===e.productId&&t.variantId===e.variantId);if(r>=0)i.items[r].quantity+=e.quantity;else{let r={id:`item-${Date.now()}`,productId:e.productId,variantId:e.variantId,quantity:e.quantity,price:t.price||0,image:t.imageUrl||"/product-holder.webp",title:t.title||`Product ${e.productId}`,titleAr:t.titleAr};i.items.push(r)}let a=s(i.items);return{...i={...i,...a,updatedAt:new Date().toISOString()}}}async updateCartItem(e){await new Promise(e=>setTimeout(e,150));let t=i.items.findIndex(t=>t.id===e.itemId);if(-1===t)throw Error("Cart item not found");e.quantity<=0?i.items.splice(t,1):i.items[t].quantity=e.quantity;let r=s(i.items);return{...i={...i,...r,updatedAt:new Date().toISOString()}}}async removeCartItem(e){await new Promise(e=>setTimeout(e,100)),i.items=i.items.filter(t=>t.id!==e);let t=s(i.items);return{...i={...i,...t,updatedAt:new Date().toISOString()}}}async clearCart(){return await new Promise(e=>setTimeout(e,100)),{...i={...i,items:[],itemCount:0,subtotal:0,tax:0,shipping:0,total:0,updatedAt:new Date().toISOString()}}}}let n=new c,A=(0,a.v)()((0,o.Zr)((e,t)=>({cart:null,isLoading:!1,isDrawerOpen:!1,error:null,addToCart:async t=>{e({isLoading:!0,error:null});try{let r=await n.addToCart(t);e({cart:r,isLoading:!1,isDrawerOpen:!0})}catch(t){e({error:{code:"ADD_TO_CART_ERROR",message:t instanceof Error?t.message:"Failed to add item to cart"},isLoading:!1})}},updateItem:async t=>{e({isLoading:!0,error:null});try{let r=await n.updateCartItem(t);e({cart:r,isLoading:!1})}catch(t){e({error:{code:"UPDATE_ITEM_ERROR",message:t instanceof Error?t.message:"Failed to update item"},isLoading:!1})}},removeItem:async t=>{e({isLoading:!0,error:null});try{let r=await n.removeCartItem(t);e({cart:r,isLoading:!1})}catch(t){e({error:{code:"REMOVE_ITEM_ERROR",message:t instanceof Error?t.message:"Failed to remove item"},isLoading:!1})}},clearCart:async()=>{e({isLoading:!0,error:null});try{let t=await n.clearCart();e({cart:t,isLoading:!1})}catch(t){e({error:{code:"CLEAR_CART_ERROR",message:t instanceof Error?t.message:"Failed to clear cart"},isLoading:!1})}},loadCart:async()=>{e({isLoading:!0,error:null});try{let t=await n.getCart();e({cart:t,isLoading:!1})}catch(t){e({error:{code:"LOAD_CART_ERROR",message:t instanceof Error?t.message:"Failed to load cart"},isLoading:!1})}},openDrawer:()=>e({isDrawerOpen:!0}),closeDrawer:()=>e({isDrawerOpen:!1}),toggleDrawer:()=>e(e=>({isDrawerOpen:!e.isDrawerOpen})),clearError:()=>e({error:null})}),{name:"cart-storage",partialize:e=>({cart:e.cart})})),d=()=>A(e=>e.cart),u=()=>A(e=>{var t;return(null==(t=e.cart)?void 0:t.itemCount)||0}),g=()=>A(e=>e.isDrawerOpen),p=()=>A(e=>e.closeDrawer),m=()=>A(e=>e.toggleDrawer)}}]);