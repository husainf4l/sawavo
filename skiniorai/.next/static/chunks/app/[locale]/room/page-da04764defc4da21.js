(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{781:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var l=s(5155),a=s(2115),r=s(5695),n=s(4267),i=s(2645),o=s(7123),d=s(5628),c=s(4333),u=s(7761),m=s(9556);let x=e=>{let{children:t,title:s,description:a}=e;return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 flex items-center justify-center p-2 sm:p-4 relative overflow-hidden",children:(0,l.jsx)("div",{className:"relative z-10 w-full max-w-5xl text-center",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-2xl rounded-2xl sm:rounded-3xl shadow-2xl border border-white/30 p-4 sm:p-8 lg:p-12 animate-in slide-in-from-bottom-4 duration-500",children:[t,(0,l.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 mt-6 sm:mt-8 font-display tracking-tight",children:s}),(0,l.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8 font-text leading-relaxed max-w-2xl mx-auto",children:a})]})})})},g=e=>{let{onClick:t,children:s}=e;return(0,l.jsx)("button",{onClick:t,className:"w-full bg-gradient-to-r from-[#13ead9] to-[#0891b2] hover:from-[#0891b2] hover:to-[#13ead9] text-white px-4 sm:px-8 py-3 sm:py-4 rounded-xl sm:rounded-2xl font-semibold text-base sm:text-lg transition-all duration-300 transform active:scale-95 sm:hover:scale-105 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-[#13ead9] focus:ring-offset-2",children:s})};function h(e){let{needsPermission:t,error:s,isConnecting:r,isConnected:n,onStartInterview:i}=e,[o,h]=(0,a.useState)(!1),[b,p]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[N,y]=(0,a.useState)(0),[k,C]=(0,a.useState)(null),[S,A]=(0,a.useState)(null),[E,P]=(0,a.useState)(null),[I,M]=(0,a.useState)(null),[T,R]=(0,a.useState)(!1),$=(0,a.useRef)(null),L=(0,a.useRef)(null),B=()=>{k&&k.getTracks().forEach(e=>e.stop()),S&&S.close(),L.current&&cancelAnimationFrame(L.current)},D=async()=>{j(!0),P(null),M(null);try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});$.current&&($.current.srcObject=e,await $.current.play()),v(!0);let t=new(window.AudioContext||window.webkitAudioContext),s=t.createAnalyser(),l=t.createMediaStreamSource(e);s.fftSize=256,l.connect(s),A(t),C(e);let a=new Uint8Array(s.frequencyBinCount),r=()=>{s.getByteFrequencyData(a);let e=a.reduce((e,t)=>e+t)/a.length;y(Math.min(100,e/128*100)),w&&(L.current=requestAnimationFrame(r))};r(),setTimeout(()=>{p(!0),j(!1),L.current&&cancelAnimationFrame(L.current)},3e3)}catch(t){j(!1);let e="Camera/Microphone access failed";"NotFoundError"===t.name?e="No camera or microphone found. Please connect devices and try again.":"NotAllowedError"===t.name?e="Camera/Microphone access denied. Please allow permissions and try again.":"NotReadableError"===t.name&&(e="Camera/Microphone is being used by another application."),P(e),M(e)}};if((0,a.useEffect)(()=>B,[]),(0,a.useEffect)(()=>{w||f||b||D()},[]),t){let e=o&&b&&f&&!w,t=E||I;return(0,l.jsxs)(x,{title:"Interview Setup",description:"We'll test your camera and microphone, then you can start your interview.",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-4 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Device Check"}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:w?"Testing...":f&&b?"Ready":t?"Failed":"Checking..."})]}),(0,l.jsx)("div",{className:"w-full bg-gray-50 rounded-xl h-48 flex items-center justify-center mb-4 overflow-hidden relative",children:f||w?(0,l.jsx)("video",{ref:$,className:"w-full h-full object-cover rounded-xl",muted:!0,playsInline:!0,autoPlay:!0}):t?(0,l.jsxs)("div",{className:"text-center p-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,l.jsx)(d.A,{className:"w-6 h-6 text-red-500"})}),(0,l.jsx)("p",{className:"text-sm text-red-600 font-medium",children:E})]}):(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Starting camera..."})]})}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3 mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w||b?"bg-blue-100":"bg-gray-200"}`,children:(0,l.jsx)(c.A,{className:`w-4 h-4 ${w||b?"text-blue-600":"text-gray-400"}`})}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Microphone"})]}),b&&(0,l.jsx)("div",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium",children:"Ready"})]}),(w||b)&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"w-full h-1.5 bg-gray-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-1.5 bg-blue-500 rounded-full transition-all duration-150",style:{width:`${N}%`}})}),(0,l.jsx)("p",{className:"text-xs text-gray-600 mt-1 text-center",children:w?"Speak to test your microphone":`Audio level: ${Math.round(N)}%`})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:`p-3 rounded-lg text-center transition-all ${f?"bg-green-50 border border-green-200":t?"bg-red-50 border border-red-200":w?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[(0,l.jsx)(u.A,{className:`w-5 h-5 mx-auto mb-1 ${f?"text-green-600":t?"text-red-600":w?"text-blue-600":"text-gray-400"}`}),(0,l.jsx)("div",{className:"text-xs font-medium",children:f?"Camera Ready":t?"Camera Failed":w?"Testing...":"Camera Pending"})]}),(0,l.jsxs)("div",{className:`p-3 rounded-lg text-center transition-all ${b?"bg-green-50 border border-green-200":t?"bg-red-50 border border-red-200":w?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[(0,l.jsx)(c.A,{className:`w-5 h-5 mx-auto mb-1 ${b?"text-green-600":t?"text-red-600":w?"text-blue-600":"text-gray-400"}`}),(0,l.jsx)("div",{className:"text-xs font-medium",children:b?"Mic Ready":t?"Mic Failed":w?"Testing...":"Mic Pending"})]})]}),t&&(null==E?void 0:E.includes("No camera or microphone found"))&&(0,l.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,l.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,l.jsx)("p",{className:"font-medium mb-2",children:"Device Setup Help:"}),(0,l.jsxs)("ul",{className:"text-xs space-y-1 list-disc list-inside",children:[(0,l.jsx)("li",{children:"Make sure your camera and microphone are properly connected"}),(0,l.jsx)("li",{children:"Check if other applications are using your devices"}),(0,l.jsx)("li",{children:"Try refreshing the page after connecting devices"}),(0,l.jsx)("li",{children:"You can still proceed with the interview if needed"})]})]})}),t&&(0,l.jsx)("button",{onClick:()=>{v(!1),p(!1),P(null),M(null),y(0),B(),D()},className:"mt-4 w-full py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}),(0,l.jsx)("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-100",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("input",{type:"checkbox",id:"privacyConsent",checked:o,onChange:e=>h(e.target.checked),className:"w-4 h-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("label",{htmlFor:"privacyConsent",className:"cursor-pointer text-sm text-gray-900 font-medium",children:["I have read and agree to the"," ",(0,l.jsx)("button",{onClick:()=>window.open("/privacy-policy","_blank"),className:"text-blue-600 hover:text-blue-700 underline font-semibold",children:"Privacy Policy"})," ","and consent to the recording of this interview."]})]})})]}),(0,l.jsx)(g,{onClick:async()=>{e&&!T&&(R(!0),setTimeout(()=>{R(!1),i()},2e3))},children:T?(0,l.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"Starting Interview..."})]}):e?"Start Interview":o?w?"Testing devices...":"Please wait for device test to complete":"Please accept our privacy policy to continue"}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-6",children:[(0,l.jsx)("button",{onClick:()=>window.location.href="/",disabled:T,className:`text-sm transition-colors ${T?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:text-gray-700"}`,children:"Cancel & Go Home"}),(0,l.jsx)("button",{onClick:()=>window.open("/privacy-policy","_blank"),disabled:T,className:`text-sm transition-colors ${T?"text-gray-300 cursor-not-allowed":"text-blue-600 hover:text-blue-700"}`,children:"View Privacy Policy"})]})]})}return s?(0,l.jsxs)(x,{title:"Connection Error",description:s||"An unexpected error occurred while connecting.",children:[(0,l.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,l.jsx)(d.A,{className:"w-10 h-10 text-red-500"})}),(0,l.jsx)("div",{className:"text-sm text-gray-500 mb-6 p-4 bg-gray-50/80 rounded-xl text-left",children:(0,l.jsx)("p",{className:"font-medium mb-2",children:"This page requires specific URL parameters to function correctly. Please ensure you have the correct link."})}),(0,l.jsx)(g,{onClick:()=>window.location.reload(),children:"Try Again"})]}):r?(0,l.jsx)(x,{title:"Connecting to Interview",description:"Setting up your secure interview session. This won't take long.",children:(0,l.jsxs)("div",{className:"relative mb-6",children:[(0,l.jsx)("div",{className:"w-20 h-20 border-4 border-[#13ead9] border-t-transparent rounded-full animate-spin mx-auto"}),(0,l.jsx)("div",{className:"absolute inset-0 w-20 h-20 border-4 border-[#0891b2]/30 border-b-transparent rounded-full animate-spin animation-delay-150 mx-auto"})]})}):n?null:(0,l.jsx)(x,{title:"Waiting for Connection",description:"Establishing connection to the interview room. Please wait.",children:(0,l.jsx)("div",{className:"w-20 h-20 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,l.jsx)(m.A,{className:"w-10 h-10 text-slate-500"})})})}var b=s(4500),p=s(8397),f=s(2771),v=s(9675),w=s(8312);function j(e){let{jobInfo:t,companyInfo:s,participantName:a,sessionDuration:r}=e,{state:n}=(0,w.V)(),i={idle:{text:"Ready",color:"blue-500",bgColor:"bg-blue-500"},listening:{text:"Listening",color:"green-500",bgColor:"bg-green-500"},thinking:{text:"Processing",color:"amber-500",bgColor:"bg-amber-500"},speaking:{text:"Speaking",color:"purple-500",bgColor:"bg-purple-500"},disconnected:{text:"Reconnecting",color:"gray-500",bgColor:"bg-gray-500"}},o=i[n]||i.idle;return(0,l.jsx)("div",{className:"bg-gradient-to-r from-white/98 via-slate-50/95 to-white/98 backdrop-blur-xl rounded-t-xl lg:rounded-t-3xl border-b border-slate-200/40 shadow-lg",children:(0,l.jsx)("div",{className:"px-2 lg:px-8 py-2 lg:py-6",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 lg:gap-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 lg:gap-6",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"w-10 h-10 lg:w-16 lg:h-16 bg-gradient-to-br from-[#13ead9] to-[#0891b2] rounded-lg lg:rounded-2xl flex items-center justify-center shadow-2xl animate-pulse",children:(0,l.jsx)(p.A,{className:"w-5 h-5 lg:w-8 lg:h-8 text-white"})}),(0,l.jsx)("div",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 lg:w-5 lg:h-5 bg-green-500 rounded-full border-2 lg:border-3 border-white animate-pulse shadow-lg"}),(0,l.jsx)("div",{className:"absolute inset-0 rounded-lg lg:rounded-2xl border-2 border-[#13ead9]/30 animate-pulse"})]}),(0,l.jsxs)("div",{className:"space-y-0.5 lg:space-y-1 min-w-0 flex-1",children:[(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-3",children:[(0,l.jsx)("h1",{className:"text-sm lg:text-2xl font-bold text-slate-800 tracking-tight truncate",children:(null==t?void 0:t.title)?`${t.title}`:"AI Interview"}),(0,l.jsx)("span",{className:"px-1.5 lg:px-3 py-0.5 lg:py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full border border-blue-200 self-start lg:self-auto",children:"LIVE"})]}),(0,l.jsxs)("div",{className:"hidden sm:flex flex-wrap items-center gap-2 lg:gap-4 text-xs lg:text-sm text-slate-600",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-[#13ead9] rounded-full animate-pulse"}),(0,l.jsx)("span",{className:"font-medium",children:"Rolevate AI Platform"})]}),(null==s?void 0:s.name)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden lg:block h-3 w-px bg-slate-300"}),(0,l.jsx)("span",{className:"text-slate-600 font-medium truncate",children:s.name})]}),(null==t?void 0:t.location)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden lg:block h-3 w-px bg-slate-300"}),(0,l.jsx)("span",{className:"text-slate-500 truncate",children:t.location})]}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden lg:block h-3 w-px bg-slate-300"}),(0,l.jsxs)("span",{className:"text-slate-600 truncate",children:["Candidate: ",a]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5 lg:gap-4 overflow-x-auto",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5 lg:gap-3 px-2 lg:px-5 py-1.5 lg:py-3 bg-white/90 backdrop-blur-sm rounded-lg lg:rounded-2xl border border-slate-200/50 shadow-lg hover:shadow-xl transition-all duration-300 shrink-0",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:`w-2.5 h-2.5 lg:w-4 lg:h-4 rounded-full ${o.bgColor} shadow-lg`}),(0,l.jsx)("div",{className:`absolute inset-0 w-2.5 h-2.5 lg:w-4 lg:h-4 rounded-full ${o.bgColor} animate-ping opacity-75`})]}),(0,l.jsxs)("div",{className:"text-xs lg:text-sm",children:[(0,l.jsx)("div",{className:"font-semibold text-slate-700",children:o.text}),(0,l.jsx)("div",{className:"text-xs text-slate-500 hidden lg:block",children:"AI Interviewer"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5 lg:gap-3 px-2 lg:px-4 py-1.5 lg:py-3 bg-slate-50/90 backdrop-blur-sm rounded-lg lg:rounded-2xl border border-slate-200/50 shadow-lg shrink-0",children:[(0,l.jsx)(f.A,{className:"w-3.5 h-3.5 lg:w-5 lg:h-5 text-slate-500"}),(0,l.jsxs)("div",{className:"text-xs lg:text-sm",children:[(0,l.jsxs)("div",{className:"font-mono font-semibold text-slate-700",children:[Math.floor(r/60),":",(r%60).toString().padStart(2,"0")]}),(0,l.jsx)("div",{className:"text-xs text-slate-500 hidden lg:block",children:"Duration"})]})]}),(null==t?void 0:t.title)&&(0,l.jsxs)("div",{className:"hidden xl:flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200/50 shadow-lg shrink-0",children:[(0,l.jsx)(v.A,{className:"w-5 h-5 text-blue-600"}),(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("div",{className:"font-semibold text-blue-700",children:"Interview Active"}),(0,l.jsx)("div",{className:"text-xs text-blue-600",children:t.title}),(null==s?void 0:s.name)&&(0,l.jsx)("div",{className:"text-xs text-blue-500",children:s.name}),(null==t?void 0:t.experience)&&(0,l.jsxs)("div",{className:"text-xs text-blue-400",children:[t.experience," experience"]})]})]})]})]})})})}var N=s(4042),y=s(1554),k=s(8791),C=s(406),S=s(25);function A(e){let{mediaControls:t,showCaptions:s,onToggleCaptions:a}=e,{isMicEnabled:r,isCameraEnabled:n,isScreenSharing:i,isVideoFullscreen:o,displayTrack:d,toggleMicrophone:x,toggleCamera:g,toggleScreenShare:h,toggleFullscreen:p}=t;return d&&(n||i)?(0,l.jsx)("div",{className:`absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent transition-opacity duration-300 z-30 ${o?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:(0,l.jsxs)("div",{className:"absolute bottom-2 lg:bottom-4 left-2 lg:left-4 right-2 lg:right-4 flex items-center justify-between",children:[(0,l.jsx)("div",{className:"bg-black/70 backdrop-blur-sm text-white px-2 lg:px-4 py-1 lg:py-2 rounded-lg lg:rounded-xl text-xs lg:text-sm font-medium",children:(0,l.jsxs)("div",{className:"flex items-center gap-1 lg:gap-2",children:[(0,l.jsx)("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 bg-green-400 rounded-full animate-pulse"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Candidate"}),(0,l.jsx)("span",{className:"sm:hidden",children:"•"}),i&&(0,l.jsxs)("div",{className:"hidden sm:flex items-center gap-1 ml-2 px-2 py-1 bg-blue-500/80 rounded-lg text-xs",children:[(0,l.jsx)(N.A,{className:"w-3 h-3"}),"Screen"]})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-1 lg:gap-2",children:[(0,l.jsx)("button",{onClick:x,className:`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${r?"bg-white/90 text-slate-700 hover:bg-white":"bg-red-500 text-white hover:bg-red-600"}`,title:r?"Mute microphone":"Unmute microphone","aria-label":r?"Mute microphone":"Unmute microphone",children:r?(0,l.jsx)(c.A,{className:"w-4 h-4 lg:w-5 lg:h-5"}):(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 lg:w-5 lg:h-5"}),(0,l.jsx)(b.A,{className:"w-2.5 h-2.5 lg:w-3 lg:h-3 absolute -top-0.5 -right-0.5 text-white"})]})}),(0,l.jsx)("button",{onClick:g,className:`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${n?"bg-white/90 text-slate-700 hover:bg-white":"bg-red-500 text-white hover:bg-red-600"}`,title:n?"Turn off camera":"Turn on camera","aria-label":n?"Turn off camera":"Turn on camera",children:n?(0,l.jsx)(u.A,{className:"w-4 h-4 lg:w-5 lg:h-5"}):(0,l.jsx)(m.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),(0,l.jsx)("button",{onClick:h,className:`hidden sm:flex w-8 h-8 lg:w-10 lg:h-10 rounded-full items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${i?"bg-blue-500 text-white hover:bg-blue-600":"bg-white/90 text-slate-700 hover:bg-white"}`,title:i?"Stop sharing screen":"Share screen","aria-label":i?"Stop sharing screen":"Share screen",children:(0,l.jsx)(N.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),(0,l.jsx)("button",{onClick:a,className:`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${s?"bg-green-500 text-white hover:bg-green-600":"bg-white/90 text-slate-700 hover:bg-white"}`,title:s?"Hide captions":"Show captions","aria-label":s?"Hide captions":"Show captions",children:(0,l.jsx)(k.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),(0,l.jsx)("button",{onClick:p,className:"hidden sm:flex w-8 h-8 lg:w-10 lg:h-10 bg-white/90 hover:bg-white text-slate-700 rounded-full items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50",title:o?"Exit fullscreen":"Enter fullscreen","aria-label":o?"Exit fullscreen":"Enter fullscreen",children:o?(0,l.jsx)(C.A,{className:"w-4 h-4 lg:w-5 lg:h-5"}):(0,l.jsx)(S.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})}):null}function E(e){let{mediaControls:t}=e,{localParticipant:s}=(0,w.C)(),r=(0,y.f)(),[n,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),{isCameraEnabled:x,isScreenSharing:g,isVideoFullscreen:h,displayTrack:p,displaySource:f,toggleCamera:j}=t;return(0,a.useEffect)(()=>{if(!r)return;let e=(e,t)=>{if(t&&t!==s){let t=e.map(e=>e.text).join(" ");if(t.trim()){i(t);let s=e.some(e=>e.final);m(s),s&&setTimeout(()=>{i(""),m(!1)},5e3)}}};return r.on("transcriptionReceived",e),()=>{r.off("transcriptionReceived",e)}},[r,s]),(0,l.jsxs)("div",{className:`video-container relative aspect-video sm:aspect-video bg-gradient-to-br from-slate-50 to-slate-100 rounded-none sm:rounded-2xl overflow-hidden shadow-none sm:shadow-xl border-0 sm:border border-slate-200/50 group min-h-[70vh] sm:min-h-0 w-full ${h?"fullscreen-container":""}`,children:[p&&(x||g)?(0,l.jsx)(o.V,{trackRef:{publication:s.getTrackPublication(f),source:f,participant:s},className:`w-full h-full ${h?"fullscreen-video":"object-cover"}`}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 relative z-10",children:(0,l.jsx)("div",{className:"text-center text-slate-500 max-w-md px-6 relative z-20",children:x?(0,l.jsx)(I,{}):(0,l.jsx)(P,{onEnableCamera:j})})}),n&&d&&(0,l.jsx)("div",{className:"absolute bottom-12 lg:bottom-16 left-2 right-2 lg:left-4 lg:right-4 z-40 pointer-events-none animate-in slide-in-from-bottom-2 duration-300",children:(0,l.jsx)("div",{className:"bg-black/90 backdrop-blur-sm text-white px-2 lg:px-4 py-2 lg:py-3 rounded-lg lg:rounded-xl shadow-2xl border border-white/20 max-w-3xl mx-auto",children:(0,l.jsxs)("div",{className:"flex items-start gap-2 lg:gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-5 h-5 lg:w-6 lg:h-6 bg-gradient-to-br from-[#13ead9] to-[#0891b2] rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-xs font-bold text-white",children:"AI"})})}),(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsxs)("p",{className:"text-xs lg:text-sm leading-relaxed font-medium text-white/95",children:[n,!u&&(0,l.jsx)("span",{className:"inline-block w-0.5 h-3 lg:h-4 bg-white/70 ml-1 animate-pulse rounded-sm"})]})}),(0,l.jsx)("button",{onClick:()=>c(!1),className:"flex-shrink-0 w-4 h-4 lg:w-5 lg:h-5 text-white/70 hover:text-white/90 transition-colors pointer-events-auto",title:"Hide captions",children:(0,l.jsx)(b.A,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})})}),(0,l.jsx)(A,{mediaControls:t,showCaptions:d,onToggleCaptions:()=>c(!d)}),(0,l.jsxs)("div",{className:"absolute top-2 lg:top-4 right-2 lg:right-4 flex flex-col gap-1 lg:gap-2",children:[(0,l.jsx)("div",{className:"hidden sm:block bg-white/90 backdrop-blur-sm px-2 lg:px-3 py-1 rounded-lg text-xs font-bold text-slate-700 shadow-lg border border-white/50",children:(0,l.jsxs)("div",{className:"flex items-center gap-1 lg:gap-2",children:[(0,l.jsx)("div",{className:"flex gap-0.5",children:[3,4,2,5].map((e,t)=>(0,l.jsx)("div",{className:"w-0.5 bg-green-500 rounded-full",style:{height:`${3*e}px`}},t))}),g?"1440p":"720p"]})}),!x&&(0,l.jsx)("div",{className:"hidden sm:block bg-blue-500/90 backdrop-blur-sm px-2 lg:px-3 py-1 lg:py-1.5 rounded-lg text-xs font-medium text-white shadow-lg border border-blue-400/50",children:(0,l.jsxs)("div",{className:"flex items-center gap-1 lg:gap-1.5",children:[(0,l.jsx)(v.A,{className:"w-3 h-3"}),(0,l.jsx)("span",{children:"+15 pts"})]})})]})]})}function P(e){let{onEnableCamera:t}=e;return(0,l.jsxs)("div",{className:"space-y-4 lg:space-y-6",children:[(0,l.jsx)("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl lg:rounded-2xl flex items-center justify-center mx-auto mb-4 lg:mb-6 shadow-lg animate-pulse",children:(0,l.jsx)(u.A,{className:"w-8 h-8 lg:w-10 lg:h-10 text-slate-500"})}),(0,l.jsxs)("div",{className:"space-y-3 lg:space-y-4",children:[(0,l.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-slate-700",children:"Camera Not Active"}),(0,l.jsx)("p",{className:"text-sm text-slate-600 leading-relaxed",children:"Enable your camera for better engagement during the interview."}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200/50 rounded-lg lg:rounded-xl p-2 lg:p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1.5 lg:gap-2 mb-1",children:[(0,l.jsx)(v.A,{className:"w-3 h-3 lg:w-4 lg:h-4 text-blue-600"}),(0,l.jsx)("span",{className:"text-xs lg:text-sm font-medium text-blue-700",children:"+15 points bonus"})]}),(0,l.jsx)("p",{className:"text-xs text-blue-600 text-center",children:"Better engagement score with video"})]})]}),(0,l.jsxs)("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-4 lg:px-6 py-3 lg:py-4 rounded-xl lg:rounded-2xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] flex items-center justify-center gap-2 lg:gap-3 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[(0,l.jsx)(u.A,{className:"w-4 h-4 lg:w-5 lg:h-5"}),"Enable Camera"]})]})}function I(){return(0,l.jsxs)("div",{className:"space-y-3 lg:space-y-4",children:[(0,l.jsx)("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-white rounded-xl lg:rounded-2xl flex items-center justify-center mx-auto mb-3 lg:mb-4 shadow-lg animate-pulse",children:(0,l.jsx)(N.A,{className:"w-8 h-8 lg:w-10 lg:h-10 text-slate-400"})}),(0,l.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-slate-600 mb-2",children:"Screen Share Disabled"}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Use screen share button to show your presentation"})]})}var M=s(8724);function T(e){let{sessionDuration:t}=e,{state:s}=(0,w.V)(),a={idle:{text:"Ready",bgColor:"bg-blue-500",message:"Interview session is ready"},listening:{text:"Listening",bgColor:"bg-green-500",message:"Actively listening to your response"},thinking:{text:"Processing",bgColor:"bg-amber-500",message:"Analyzing your response"},speaking:{text:"Speaking",bgColor:"bg-purple-500",message:"AI interviewer is responding"},disconnected:{text:"Reconnecting",bgColor:"bg-gray-500",message:"Attempting to reconnect"}},r=a[s]||a.idle;return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white to-slate-50/50 rounded-2xl p-6 border border-slate-200/50 shadow-lg text-center",children:[(0,l.jsxs)("div",{className:"relative w-28 h-28 mx-auto mb-6 animate-pulse",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-[#13ead9]/20 to-[#0891b2]/20 rounded-full animate-pulse"}),(0,l.jsx)("div",{className:"absolute inset-2 bg-gradient-to-br from-[#13ead9] to-[#0891b2] rounded-full flex items-center justify-center shadow-xl",children:(0,l.jsx)("span",{className:"text-2xl font-bold text-white",children:"AI"})}),"speaking"===s&&(0,l.jsx)("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center animate-bounce",children:(0,l.jsx)("div",{className:"w-3 h-3 bg-white rounded-full"})}),"listening"===s&&(0,l.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:(0,l.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),"thinking"===s&&(0,l.jsx)("div",{className:"absolute -top-2 -left-2 w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center animate-spin",children:(0,l.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,l.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"AI Executive Interviewer"}),(0,l.jsx)("p",{className:"text-slate-600 mb-4 leading-relaxed",children:r.message}),(0,l.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-xl",children:[(0,l.jsx)("div",{className:`w-2 h-2 rounded-full ${r.bgColor} animate-pulse`}),(0,l.jsx)("span",{className:"text-sm font-medium text-slate-700",children:r.text})]})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200/50 shadow-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Session Information"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg",children:[(0,l.jsx)("span",{className:"text-sm text-slate-600",children:"Duration"}),(0,l.jsxs)("span",{className:"text-sm font-mono font-semibold text-slate-800",children:[Math.floor(t/60),":",(t%60).toString().padStart(2,"0")]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg",children:[(0,l.jsx)("span",{className:"text-sm text-slate-600",children:"Connection"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,l.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Secure"})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg",children:[(0,l.jsx)("span",{className:"text-sm text-slate-600",children:"Audio Quality"}),(0,l.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Excellent"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg",children:[(0,l.jsx)("span",{className:"text-sm text-slate-600",children:"AI Performance"}),(0,l.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Optimal"})]})]}),(0,l.jsxs)("div",{className:"mt-4 p-3 bg-white/50 rounded-lg border border-blue-200/30",children:[(0,l.jsx)("h5",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Live Assessment"}),(0,l.jsx)("p",{className:"text-xs text-blue-700 leading-relaxed",children:"Demonstrating strong communication skills with clear articulation and thoughtful responses. Maintaining excellent professional presence throughout the session."})]}),(0,l.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to end the interview?")&&(window.parent.postMessage({type:"END_INTERVIEW"},"*"),window.location.href="/")},className:"w-full mt-6 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-red-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[(0,l.jsx)(M.A,{className:"w-5 h-5"}),"End Interview"]})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4 border border-green-200/50 shadow-lg",children:[(0,l.jsx)("h4",{className:"text-sm font-semibold text-green-800 mb-2",children:"Interview Tips"}),(0,l.jsxs)("ul",{className:"text-xs text-green-700 space-y-1",children:[(0,l.jsx)("li",{children:"• Speak clearly and at a moderate pace"}),(0,l.jsx)("li",{children:"• Take time to think before responding"}),(0,l.jsx)("li",{children:"• Use specific examples when possible"}),(0,l.jsx)("li",{children:"• Ask clarifying questions if needed"})]})]})]})}function R(e){let{isMicEnabled:t,sessionDuration:s}=e,{state:r}=(0,w.V)(),{audioLevels:n,hasAudioActivity:i}=function(e){let[t,s]=(0,a.useState)(Array(45).fill(0)),[l,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),o=(0,a.useRef)(null),d=(0,a.useRef)(null),c=(0,a.useRef)(null),u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(0,a.useEffect)(()=>{if(u)return void s(Array(45).fill(0));if(!e){s(Array(45).fill(0)),o.current&&(cancelAnimationFrame(o.current),o.current=null),d.current&&(clearInterval(d.current),d.current=null),c.current&&(c.current.getTracks().forEach(e=>e.stop()),c.current=null),l&&"closed"!==l.state&&(l.close(),r(null),i(null));return}return(async()=>{try{let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:e?16e3:44100}});c.current=t;let s=new AudioContext({sampleRate:e?16e3:44100}),l=s.createMediaStreamSource(t),a=s.createAnalyser();a.fftSize=e?64:128,l.connect(a),r(s),i(a);return}catch(e){return d.current=setInterval(()=>{s(Array.from({length:45},()=>.3*Math.random()))},/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?200:100),()=>{d.current&&(clearInterval(d.current),d.current=null)}}})(),()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null),d.current&&(clearInterval(d.current),d.current=null),c.current&&(c.current.getTracks().forEach(e=>e.stop()),c.current=null),l&&"closed"!==l.state&&l.close()}},[e]),(0,a.useEffect)(()=>{if(!n||!e)return;let t=new Uint8Array(n.frequencyBinCount),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=()=>{if(n&&e)try{n.getByteFrequencyData(t);let e=Array.from({length:45},(e,s)=>{let l=Math.floor(s/45*t.length),a=(t[l]||0)/255;return Math.max(.05,a)});s(e);let r=()=>{o.current=requestAnimationFrame(a)};l?setTimeout(r,32):r()}catch(e){o.current&&(cancelAnimationFrame(o.current),o.current=null)}};return a(),()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null)}},[n,e]);let m=(0,a.useCallback)(()=>e&&t.some(e=>e>.5),[e,t]);return{audioLevels:t,hasAudioActivity:m()}}(t),o={idle:{message:"Interview session is ready"},listening:{message:"Actively listening to your response"},thinking:{message:"Analyzing your response"},speaking:{message:"AI interviewer is responding"},disconnected:{message:"Attempting to reconnect"}},d=o[r]||o.idle;return(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white to-slate-50/50 rounded-2xl p-6 border border-slate-200/50 shadow-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-700",children:"Real-time Audio Analysis"}),(0,l.jsxs)("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ${t?"bg-green-100":"bg-red-100"}`,children:[(0,l.jsx)("div",{className:`w-2 h-2 rounded-full animate-pulse ${t?"bg-green-500":"bg-red-500"}`}),(0,l.jsx)("span",{className:`text-xs font-medium ${t?"text-green-700":"text-red-700"}`,children:t?"ACTIVE":"MUTED"})]})]}),(0,l.jsxs)("div",{className:"relative h-20 w-full bg-gradient-to-r from-slate-50 to-white rounded-xl border border-slate-200/50 shadow-inner overflow-hidden",children:[(0,l.jsxs)("div",{className:"absolute inset-0 opacity-20",children:[(0,l.jsx)("div",{className:"absolute top-2 left-4 w-1 h-1 bg-[#13ead9] rounded-full animate-pulse"}),(0,l.jsx)("div",{className:"absolute top-6 right-8 w-1 h-1 bg-[#0891b2] rounded-full animate-pulse animation-delay-300"}),(0,l.jsx)("div",{className:"absolute bottom-4 left-12 w-1 h-1 bg-[#13ead9] rounded-full animate-pulse animation-delay-600"})]}),(0,l.jsx)("div",{className:"flex gap-1 items-end h-full w-full justify-center p-3",children:n.map((e,s)=>(0,l.jsx)("div",{className:`w-1 rounded-full transition-all duration-100 ${t&&e>.1?"bg-gradient-to-t from-[#13ead9] to-[#0891b2]":"bg-gradient-to-t from-gray-300 to-gray-400"}`,style:{height:`${Math.max(8,70*e)}%`,opacity:t?.8+.2*e:.3}},s))}),i&&(0,l.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#13ead9]/20 via-[#0891b2]/20 to-[#13ead9]/20 rounded-xl pointer-events-none opacity-50 animate-pulse"})]}),(0,l.jsxs)("div",{className:"text-center mt-4",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600 font-medium",children:d.message}),"listening"===r&&(0,l.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Speak naturally and take your time to respond"}),"thinking"===r&&(0,l.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Processing your response to provide relevant follow-up"}),!t&&(0,l.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Please unmute your microphone to continue"})]}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 text-xs",children:[(0,l.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-3 border border-white/50",children:[(0,l.jsx)("div",{className:"text-slate-500 mb-1",children:"Audio Quality"}),(0,l.jsx)("div",{className:"font-semibold text-slate-700",children:t?"Excellent":"No Input"})]}),(0,l.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-3 border border-white/50",children:[(0,l.jsx)("div",{className:"text-slate-500 mb-1",children:"Session Time"}),(0,l.jsxs)("div",{className:"font-mono font-semibold text-slate-700",children:[Math.floor(s/60),":",(s%60).toString().padStart(2,"0")]})]})]})]})}function $(e){let{jobInfo:t,companyInfo:s,participantName:i}=e,[o,d]=(0,a.useState)(0),[c,u]=(0,a.useState)(!1),m=function(){var e,t;let{localParticipant:s}=(0,w.C)(),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),x=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(0,a.useEffect)(()=>{let e=s.getTrackPublication(n.CC.Source.Microphone),t=s.getTrackPublication(n.CC.Source.Camera),l=s.getTrackPublication(n.CC.Source.ScreenShare);r((null==e?void 0:e.isEnabled)??!0),o((null==t?void 0:t.isEnabled)??!0),c((null==l?void 0:l.isEnabled)??!1)},[s]);let g=(0,a.useCallback)(async()=>{try{x&&await new Promise(e=>setTimeout(e,100)),await s.setMicrophoneEnabled(!l),r(!l)}catch(t){let e=s.getTrackPublication(n.CC.Source.Microphone);r((null==e?void 0:e.isEnabled)??!1)}},[s,l,x]),h=(0,a.useCallback)(async()=>{try{if(i)await s.setCameraEnabled(!1);else{let e=x?{resolution:{width:640,height:480,frameRate:15}}:{resolution:{width:1280,height:720,frameRate:30}};await s.setCameraEnabled(!0,e)}o(!i)}catch(e){}},[s,i,x]),b=(0,a.useCallback)(async()=>{try{if(d)await s.setScreenShareEnabled(!1);else{let e=x?{resolution:{width:1280,height:720,frameRate:10}}:{resolution:{width:2560,height:1440,frameRate:15}};await s.setScreenShareEnabled(!0,e)}c(!d)}catch(e){}},[s,d,x]),p=(0,a.useCallback)(async()=>{let e=document.querySelector(".video-container");if(document.fullscreenElement)try{await document.exitFullscreen(),m(!1)}catch(e){m(!1)}else try{await (null==e?void 0:e.requestFullscreen()),m(!0)}catch(e){m(!0)}},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u&&m(!1)},t=()=>{m(!!document.fullscreenElement)};return document.addEventListener("keydown",e),document.addEventListener("fullscreenchange",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("fullscreenchange",t)}},[u]);let f=null==(e=s.getTrackPublication(n.CC.Source.Camera))?void 0:e.track,v=null==(t=s.getTrackPublication(n.CC.Source.ScreenShare))?void 0:t.track,j=v?n.CC.Source.ScreenShare:n.CC.Source.Camera;return{isMicEnabled:l,isCameraEnabled:i,isScreenSharing:d,isVideoFullscreen:u,localVideoTrack:f,localScreenTrack:v,displayTrack:v||f,displaySource:j,toggleMicrophone:g,toggleCamera:h,toggleScreenShare:b,toggleFullscreen:p,setIsVideoFullscreen:m}}(),x=(0,r.useRouter)();return(0,a.useEffect)(()=>{let e=setInterval(()=>{d(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return;let e=()=>{document.hidden};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),(0,l.jsxs)("div",{className:"relative z-10 flex-1 flex items-center justify-center p-0 sm:p-2 lg:p-6 xl:p-8",children:[(0,l.jsxs)("div",{className:"w-full max-w-7xl mx-auto animate-in slide-in-from-bottom-4 duration-700",children:[(0,l.jsx)(j,{jobInfo:t,companyInfo:s,...i&&{participantName:i},sessionDuration:o}),(0,l.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-0 lg:gap-6 p-0 lg:p-6 bg-transparent sm:bg-white/95 backdrop-blur-none sm:backdrop-blur-xl rounded-none sm:rounded-b-xl lg:rounded-b-3xl shadow-none sm:shadow-2xl border-0 sm:border border-white/30",children:[(0,l.jsxs)("div",{className:"xl:col-span-2 space-y-3 lg:space-y-6 order-1 px-4 sm:px-0",children:[(0,l.jsx)(E,{mediaControls:m}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsxs)("button",{onClick:()=>{u(!0)},className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl shadow-lg transition-all duration-200 flex items-center gap-2 min-w-[160px] justify-center",children:[(0,l.jsx)(b.A,{className:"w-5 h-5"}),"End Interview"]})}),(0,l.jsx)("div",{className:"hidden sm:block",children:(0,l.jsx)(R,{isMicEnabled:m.isMicEnabled,sessionDuration:o})})]}),(0,l.jsx)("div",{className:"hidden lg:block order-first xl:order-last",children:(0,l.jsx)(T,{sessionDuration:o})})]})]}),c&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,l.jsx)("div",{className:"bg-white rounded-2xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)(b.A,{className:"w-6 h-6 text-red-600"})}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"End Interview?"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the interview? This action cannot be undone."}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{try{navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(e=>{e.getTracks().forEach(e=>e.stop())}).catch(()=>{})}catch(e){}x.push("/jobs")},className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 transition-colors",children:"Leave"})]})]})})})]})}var L=s(9509);let B={API_BASE_URL:"http://localhost:4008/api",LIVEKIT_URL:L.env.LIVEKIT_URL||"wss://widdai-aphl2lb9.livekit.cloud",LIVEKIT_API_KEY:L.env.LIVEKIT_API_KEY||"",LIVEKIT_SECRET_KEY:L.env.LIVEKIT_SECRET_KEY||""};function D(){let e=(0,r.useSearchParams)(),[t]=(0,a.useState)(()=>new n.Wv),{isConnected:s,isConnecting:d,error:c,needsPermission:u,participantName:m,companyInfo:x,jobInfo:g,handleStartInterview:b,updateConnectionState:p,updateError:f,updateJobData:v}=function(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),h=(0,a.useCallback)(async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getTracks().forEach(e=>e.stop()),o(!1),n(null);return}catch(e){}try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})).getTracks().forEach(e=>e.stop()),o(!1),n(null);return}catch(e){}o(!1),n(null)},[]),b=(0,a.useCallback)((e,s)=>{t(e),l(s)},[]);return{isConnected:e,isConnecting:s,error:r,needsPermission:i,participantName:d,companyInfo:u,jobInfo:x,handleStartInterview:h,setNeedsPermission:o,updateConnectionState:b,updateError:(0,a.useCallback)(e=>{n(e)},[]),updateJobData:(0,a.useCallback)((e,t,s)=>{e&&g(e),t&&m(t),s&&c(s)},[]),setIsConnected:t,setIsConnecting:l,setError:n,setParticipantName:c,setCompanyInfo:m,setJobInfo:g}}(),{connectToRoom:w}=function(e){let{room:t,searchParams:s,onConnectionChange:l,onError:r,onJobDataUpdate:n}=e,i=(0,a.useRef)(!1),o=(0,a.useCallback)(async()=>{var e,a,o,d,c,u,m,x,g,h,b,p,f,v,w;if(!i.current)try{i.current=!0,l(!1,!0),r(null);let b=s.get("token"),p=s.get("roomName"),f=s.get("serverUrl"),v=b,w=p,j=f||"wss://rolvate2-ckmk80qb.livekit.cloud";if(!v){let t=await fetch(`${B.API_BASE_URL}/room/create-new-room`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!t.ok)throw Error(`Failed to create room: ${await t.text()}`);let s=await t.json();if(v=s.token,w=(null==(e=s.room)?void 0:e.name)||s.roomName,j=s.liveKitUrl,n){let e={title:(null==(o=s.room)||null==(a=o.metadata)?void 0:a.jobName)||(null==(d=s.interviewContext)?void 0:d.jobName),location:null,experience:null},t={name:(null==(u=s.room)||null==(c=u.metadata)?void 0:c.companyName)||(null==(m=s.interviewContext)?void 0:m.companyName)},l=s.participantName||(null==(g=s.room)||null==(x=g.metadata)?void 0:x.candidateName)||(null==(h=s.interviewContext)?void 0:h.candidateName);n(e,t,l)}}if(!v||!w)throw Error(`Missing required parameters - token: ${!!v}, roomName: ${!!w}`);t.removeAllListeners();let N=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t.on("connected",()=>{i.current=!1,l(!0,!1)}),t.on("disconnected",e=>{i.current=!1,l(!1,!1),N&&setTimeout(()=>{t.state},2e3)}),t.on("reconnecting",()=>{l(!1,!0)}),t.on("reconnected",()=>{i.current=!1,l(!0,!1)}),t.on("connectionQualityChanged",e=>{});let y={autoSubscribe:!0,rtcConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}],...N&&{iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}},...N&&{audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,channelCount:1},audioPlaybackDefaults:{autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1}}};await t.connect(j,v,y);try{await t.localParticipant.setMicrophoneEnabled(!0,N?{echoCancellation:!0,noiseSuppression:!0}:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0})}catch(e){try{await t.localParticipant.setMicrophoneEnabled(!0)}catch(e){}}try{await t.localParticipant.setCameraEnabled(!0,N?{resolution:{width:640,height:480,frameRate:15}}:{resolution:{width:1280,height:720,frameRate:30}})}catch(e){}}catch(s){i.current=!1;let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=s.message||"Failed to connect to room";e&&((null==(b=s.message)?void 0:b.includes("websocket"))||(null==(p=s.message)?void 0:p.includes("network"))?t="Mobile connection issue detected. Please check your internet connection and try again.":((null==(f=s.message)?void 0:f.includes("media"))||(null==(v=s.message)?void 0:v.includes("camera"))||(null==(w=s.message)?void 0:w.includes("microphone")))&&(t="Camera or microphone access failed. Please check permissions and try again.")),r(t),l(!1,!1)}},[t,s,l,r,n]);return(0,a.useEffect)(()=>{let e=e=>(e.preventDefault(),"Are you sure you want to leave? This will end the interview.");return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e),t.disconnect()}},[t]),{connectToRoom:o}}({room:t,searchParams:e,onConnectionChange:p,onError:f,onJobDataUpdate:v});return((0,a.useEffect)(()=>{u||s||d||c||w()},[u,s,d,c,w]),u||c||d||!s)?(0,l.jsx)(h,{needsPermission:u,error:c,isConnecting:d,isConnected:s,onStartInterview:b}):(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 relative overflow-hidden",children:(0,l.jsxs)(i.L,{room:t,children:[(0,l.jsx)($,{jobInfo:g,companyInfo:x,participantName:m}),(0,l.jsx)(o.R,{})]})})}},8544:(e,t,s)=>{Promise.resolve().then(s.bind(s,781))}},e=>{e.O(0,[501,173,441,964,977],()=>e(e.s=8544)),_N_E=e.O()}]);